# jcglobeway 팀 Cursor 규칙

## 커밋 메시지 규칙
- 모든 커밋 메시지는 한국어로 작성
- 형식: `[타입] 제목` (50자 이내)
- 타입 종류:
  - feat: 새로운 기능 추가
  - fix: 버그 수정
  - refactor: 코드 리팩토링 (기능 변경 없음)
  - style: 코드 포맷팅, 세미콜론 누락 등
  - docs: 문서 수정
  - test: 테스트 코드 추가/수정
  - chore: 빌드 업무, 패키지 매니저 설정 등
- 예시: `[feat] 사용자 로그인 API 추가`
- 커밋 본문은 '무엇을', '왜' 변경했는지 명확히 작성

## 코드 작성 원칙

### 일반 원칙
- 간결하고 명확한 코드 작성
- 중복 코드 최소화 (DRY 원칙)
- 함수는 하나의 책임만 가지도록 작성 (SRP)
- 매직 넘버/문자열 사용 금지 → 상수로 정의
- 의미 있는 변수명 사용 (축약어 지양)

### TypeScript/NestJS 스타일
- interface 우선, type은 union/intersection 필요시에만 사용
- enum은 대문자 스네이크 케이스 사용
- DTO 클래스는 class-validator 데코레이터와 함께 작성
- Service 레이어에 비즈니스 로직 집중
- Controller는 얇게 유지 (요청/응답 처리만)
- 의존성 주입(DI) 적극 활용

### 네이밍 컨벤션
- 파일명: kebab-case (user-service.ts)
- 클래스명: PascalCase (UserService)
- 함수/변수명: camelCase (getUserById)
- 상수: UPPER_SNAKE_CASE (MAX_RETRY_COUNT)
- Private 메서드: 접두사 없이 명확한 이름 사용

## 에러 처리
- try-catch는 필요한 곳에만 사용
- 의미 있는 에러 메시지 작성
- NestJS HttpException 활용
- 에러 로그는 상세하게, 사용자 메시지는 간결하게
- 예외 상황을 먼저 처리 (Early Return)

## 로깅
- 중요한 비즈니스 로직 시작/종료 시점 로깅
- 민감 정보(비밀번호, 토큰 등) 로그 출력 금지
- 로그 레벨 적절히 사용:
  - error: 시스템 오류
  - warn: 잠재적 문제
  - info: 주요 비즈니스 이벤트
  - debug: 개발 디버깅 정보

## 비동기 처리
- async/await 사용 (Promise.then 지양)
- 병렬 처리 가능한 작업은 Promise.all 활용
- 에러 핸들링 누락 방지

## 테스트
- 단위 테스트는 AAA 패턴 (Arrange, Act, Assert)
- 테스트 함수명: 한글로 명확하게 (예: '사용자 ID로 조회 시 사용자 정보를 반환한다')
- Mock 객체는 최소한으로 사용
- E2E 테스트는 핵심 플로우 위주로 작성

## 주석
- 코드로 설명 가능한 부분은 주석 대신 리팩토링
- 복잡한 비즈니스 로직에만 주석 작성
- 주석은 '왜'를 설명 ('무엇'은 코드로 표현)
- TODO 주석에는 담당자와 날짜 포함

## 금지 사항
- console.log 사용 금지 (로거 사용)
- any 타입 사용 최소화
- 하드코딩된 값 사용 금지
- 불필요한 else 문 (Early Return 활용)
- 깊은 중첩 (3depth 이상) 지양

## Git 브랜치 전략
- main: 운영 배포 브랜치
- develop: 개발 통합 브랜치
- feature/기능명: 기능 개발 브랜치
- fix/버그명: 버그 수정 브랜치
- hotfix/긴급수정명: 운영 긴급 수정 브랜치

## PR 규칙
- 제목: `[타입] 간결한 설명` (50자 이내)
- 본문에 변경 내용, 테스트 방법 포함
- 리뷰어 최소 1명 지정
- 모든 테스트 통과 후 머지
- Squash and Merge 사용

## AI 코드 생성 시 주의사항
- 생성된 코드는 반드시 리뷰 후 수정
- 팀 코딩 컨벤션에 맞게 조정
- 불필요한 주석 제거
- 테스트 코드도 함께 생성 요청
